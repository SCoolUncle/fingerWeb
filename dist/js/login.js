"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),e}var box=document.getElementById("loginBox");function forgetP(){$(".l-tab-list:last").click()}var Loginobj=function(){function t(e){_classCallCheck(this,t),this.ele=e,this.username=this.ele.querySelector("#username"),this.password=this.ele.querySelector("#password"),this.loginerror=this.ele.querySelector("#loginError"),this.regerror=this.ele.querySelector("#regError"),this.loginbtn=this.ele.querySelector("#loginbtn"),this.tabBtns=this.ele.querySelectorAll(".l-tab-covers div"),this.infoBox=this.ele.querySelectorAll(".static-module .inform-box"),this.regbtn=this.ele.querySelector("#regbtn"),this.setname=this.ele.querySelector("#setname"),this.setpwd=this.ele.querySelector("#setpwd"),this.setpwds=this.ele.querySelector("#setpwds"),this.sms=this.ele.querySelector("#sms"),this.inputlist=this.ele.querySelectorAll("input"),this.getsms=this.ele.querySelector("#smsbtn"),this.tfRes=!1}return _createClass(t,[{key:"tabswiper",value:function(){var s=this;this.tabBtns.forEach(function(e,t){e.onclick=function(){s.tabBtns.forEach(function(e,t){e.classList.remove("active"),s.infoBox[t].classList.remove("active")}),e.classList.add("active"),s.infoBox[t].classList.add("active")}})}},{key:"judgment",value:function(){var t=this;$("#loginbtn").on("click",function(){var i=$("#username").val(),e=$("#password").val(),n=$(".autoCheck").prop("checked");t.loginVerification(t.username,t.password,t.loginerror),1==t.tfRes&&$.ajax({url:"../php/goods_login.php",type:"post",data:{userName:i,userPwd:e},dataType:"json",success:function(e){if("1"==e&&1==n){setcookie("login","".concat(i),3600,"/");var t=decodeURIComponent(window.location.search);t=t.substr(1),window.location.href=t}else if("1"==e){setcookie("login","".concat(i),"","/");var s=decodeURIComponent(window.location.search);s=s.substr(1),window.location.href=s}else $("#loginError").css("display","block"),$("#loginError").html("该账号还没有注册，请您前往注册!")}})})}},{key:"registered",value:function(){var i=this;$("#regbtn").css("cursor","pointer"),$("#regbtn").on("click",function(){var e=$("#setname").val(),t=$("#setpwd").val(),s=$("#setpwds").val();i.loginVerification(i.setname,i.setpwd,i.regerror),t!==s&&($("#regError").css("display","block"),$("#regError").html("两次输入的密码不一致!"),i.tfRes=!1),1==i.tfRes&&$.ajax({url:"../php/goods_res.php",type:"post",data:{userName:e,userPwd:t},dataType:"json",success:function(e){if("1"==e){$("body").prepend('\n                            <div id="regtrue">\n                            <div>\n                                <p>注册成功!</p>\n                            </div>\n                            </div>'),$("#regtrue").fadeOut(4e3),setTimeout(function(){window.location.reload()},3e3)}else alert("该账号已被注册!")}})})}},{key:"loginVerification",value:function(e,t,s){this.tfRes=!1;""!=e.value&&/^1[3-9][0-9]{9}$/.test(e.value)?""!=t.value&&/[A-z0-9]{6,10}/.test(t.value)?(s.innerHTML="",s.style.display="none",this.tfRes=!0):(s.style.display="block",s.innerHTML="密码错误！"):(s.style.display="block",s.innerHTML="请输入一个11位电话号码！")}},{key:"autoLogin",value:function(){}},{key:"addListener",value:function(e,t,s){e.addEventListener?e.addEventListener(t,s,!1):e.attachEvent("on"+t,function(){s.call(e)})}},{key:"init",value:function(){this.tabswiper(),this.judgment(),this.registered()}}]),t}(),newobj=new Loginobj(box);newobj.init();